<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Revilise</title>
    <link rel="stylesheet" href="./fonts/fonts.css" />
    <link rel="stylesheet" href="index.css" />
    <!-- insert styles here--->
</head>
<body>
    <div class="site">
        <div class="header"></div>
        <div class="intro"></div>
        <div class="about-me"></div>
        <div class="goals"></div>
        <div class="skills"></div>
        <div class="ad_skills"></div>
    </div>
</body>
<script>
  const blocks = document.querySelectorAll('.site > div')

  async function fetchData(block) {
      fetch(`./blocks/${block.className}/${block.className}.html`)
          .then(res => res.text())
          .then(text => {
              block.innerHTML = text
          })
  }
  async function connectStyles(classname) {
    let head = document.querySelector('head')
    let style = document.createElement('link')
    style.innerHTML = `<link rel="stylesheet" href="blocks/${classname}/${classname}.css">`
    head.appendChild(style)
  }

  new Promise(async (res) => {
      await blocks.forEach(block => {
          fetchData(block)
          connectStyles(block.className)
      })
      res()
  }).then(() => {
      // span рендерится не сразу, поэтому придется его ловить через процессы.
      function changeYears() {
          let span = document.getElementById("intro__subtitle")
          if (span) {
            return  span.textContent = `мне ${19} и я фронтенд разработчик`;
          }
          // кидаю в конец очереди процессов очередную попытку найти span на странице.
          return setTimeout(changeYears, 0);
      }
      changeYears();
  })
</script>
</html>